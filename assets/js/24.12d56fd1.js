(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{242:function(e,n,t){"use strict";t.r(n);var a=t(0),s=Object(a.a)({},(function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h4",{attrs:{id:"_1-模板缺陷"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-模板缺陷"}},[e._v("#")]),e._v(" 1.模板缺陷")]),e._v(" "),t("p",[e._v("模板的最大特点是扩展难度大，不易扩展。可能会造成逻辑冗余")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('<Level :type="1">哈哈</Level>\n<Level :type="2">哈哈</Level>\n<Level :type="3">哈哈</Level>\n')])])]),t("p",[e._v("Level组件需要对不同的type产生不同的标签")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('<template>\n <h1 v-if="type==1">\n  <slot></slot>\n </h1>\n <h2 v-else-if="type==2">\n  <slot></slot>\n </h2>\n <h3 v-else-if="type==3">\n  <slot></slot>\n </h3>\n </template>\n <script>\n export default {\n props: {\n  type: {\n   type: Number\n  }\n }};\n <\/script>\n')])])]),t("h4",{attrs:{id:"_2-函数式组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-函数式组件"}},[e._v("#")]),e._v(" 2.函数式组件")]),e._v(" "),t("p",[e._v("函数式组件没有模板,只允许提供render函数")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('export default {\n render(h) {\n  return h("h" + this.type, {}, this.$slots.default);\n },\n props: {\n  type: {\n   type: Number\n  }\n }}\n')])])]),t("blockquote",[t("p",[e._v("复杂的逻辑变得非常简单")])]),e._v(" "),t("h4",{attrs:{id:"_3-jsx应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-jsx应用"}},[e._v("#")]),e._v(" 3.JSX应用")]),e._v(" "),t("p",[e._v("使用jsx会让代码看起来更加简洁易于读取")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('export default {\n render(h) {\n  const tag = "h" + this.type;\n  return <tag>{this.$slots.default}</tag>;\n },\n props: {\n  type: {\n   type: Number\n  }\n }};\n')])])]),t("h4",{attrs:{id:"_4-render方法订制组件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-render方法订制组件"}},[e._v("#")]),e._v(" 4.render方法订制组件")]),e._v(" "),t("p",[e._v("编写List组件可以根据用户传入的数据自动循环列表")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('<List :data="data"></List>\n<script>\nimport List from "./components/List";\nexport default {\n data() {\n  return { data: ["苹果", "香蕉", "橘子"] };\n },\n components: {\n  List\n }};<\/script>\n\n\x3c!-- List组件渲染列表 --\x3e\n<template>\n <div class="list">\n  <div v-for="(item,index) in data" :key="index">\n   <li>{{item}}</li>\n  </div>\n </div>\n </template>\n <script>\n export default {\n props: {\n  data: Array,\n  default: () => []\n }};<\/script>\n')])])]),t("p",[e._v("通过render方法来订制组件,在父组件中传入render方法")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('<List :data="data" :render="render"></List>\nrender(h, name) {\n   return <span>{name}</span>;\n }\n')])])]),t("p",[e._v("我们需要createElement方法，就会想到可以编写个函数组件，将createElement方法传递出来")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('<template>\n <div class="list">\n  <div v-for="(item,index) in data" :key="index">\n   <li v-if="!render">{{item}}</li>\n   \x3c!-- 将render方法传到函数组件中，将渲染项传入到组件中，在内部回调这个render方法 --\x3e\n   <ListItem v-else :item="item" :render="render"></ListItem>\n  </div>\n </div>\n </template>\n <script>\n import ListItem from "./ListItem";\n export default {\n components: {\n  ListItem\n },\n props: {\n  render: {\n   type: Function\n  },\n  data: Array,\n  default: () => []\n }};\n <\/script>\n')])])]),t("p",[e._v("ListItem.vue调用最外层的render方法，将createElement和当前项传递出来")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("<script>\nexport default {\n props: {\n  render: {\n   type: Function\n  },\n  item: {}\n },\n render(h) {\n  return this.render(h, this.item);\n }};\n <\/script>\n")])])]),t("h4",{attrs:{id:"_5-scope-slot"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-scope-slot"}},[e._v("#")]),e._v(" 5.scope-slot")]),e._v(" "),t("p",[e._v("使用v-slot 将内部值传即可")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('\n<List :arr="arr">\n    <template v-slot="{item}">\n        {{item}}\n    </template>\n </List>\n \n<div v-for="(item,key) in arr" :key="key">\n    <slot :item="item"></slot>\n </div>\n')])])]),t("h4",{attrs:{id:"_5-编写可编辑表格"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-编写可编辑表格"}},[e._v("#")]),e._v(" 5.编写可编辑表格")]),e._v(" "),t("p",[e._v("基于iview使用jsx扩展成可编辑的表格")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("\n<template><div>\n  <Table :columns=\"columns\" :data=\"data\"></Table></div>\n  </template>\n  <script>\n  import Vue from 'vue';\n  export default {\n  methods:{\n    render(h,{column,index,row}){\n      let value = row[column.key];\n      return <div on-click={(e)=>this.changeIndex(e,index)} >\n      {this.index === index? \n        <i-input type=\"text\" value={value} on-input={(value)=>{\n          this.handleChange(value,column,row)\n        }} onOn-enter={()=>this.enter(row,index)}/>:\n        <span>{value}</span>\n      }\n      </div>\n    },\n    enter(row,index){\n      this.data.splice(index,1,row);\n      this.index = -1;\n    },\n    handleChange(value,column,row){\n      row[column['key']]= value;\n    },\n    changeIndex(e,index){\n      this.index = index;\n      this.$nextTick(()=>{\n        e.currentTarget.getElementsByTagName(\"input\")[0].focus()\n      })\n    }\n  },\n  data() {\n    return {\n      index:-1,\n      columns: [\n        {\n          title: 'Name',\n          key: 'name',\n          render:this.render\n        },\n        {\n          title: 'Age',\n          key: 'age',\n        },\n        {\n          title: 'Address',\n          key: 'address',\n        },\n      ],\n      data: [\n        {\n          name: 'John Brown',\n          age: 18,\n          address: 'New York No. 1 Lake Park',\n          date: '2016-10-03',\n        },\n        {\n          name: 'Jim Green',\n          age: 24,\n          address: 'London No. 1 Lake Park',\n          date: '2016-10-01',\n        },\n        {\n          name: 'Joe Black',\n          age: 30,\n          address: 'Sydney No. 1 Lake Park',\n          date: '2016-10-02',\n        },\n        {\n          name: 'Jon Snow',\n          age: 26,\n          address: 'Ottawa No. 2 Lake Park',\n          date: '2016-10-04',\n        },\n      ],\n    };\n  },};\n  <\/script>\n")])])]),e._v(" "),t("comment-comment")],1)}),[],!1,null,null,null);n.default=s.exports}}]);